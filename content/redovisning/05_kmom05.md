---
---
Redovisning kmom05
=========================

Detta kursmomentet gick ganska snabbt då jag redan hade alla kraven avklarade i föregående kursmoment, men som "Continuous integration" valde jag Travis, Scrutinizer, Codacy, Codeclimate. Jag la även in två stycken brickor från Pakagist som visar versions nummeret samn lisensen till modulen.

Över lag var det inga större problem att stoppa in dem i README filen då, jag redan började dem efter det första kursmomentet. Om det var något som krånglade lite var det att länka codecovrage till Scrutinizer samt att Travis inte alltid ville hämta mitt git repo av någon anledning, då den "failade" att clona den.

När det kommer till CI-tjänsterna så gillade jag alla, då de tillför sina egna saker men mest uppskattar jag nog Scrutinizer och Codacy. Både gör liknande saker Scrutinizer ger ganska tydlig information om vad som kan förbättras, den är snabb att medela om man har något fel i koden vilken kan spara endel tid i felsökningar. Codacy fungerar nästan lika dant som Scrutinizer gör fast den är lite strängare, nackdelen är att den tar mycket längre stund att uppdateras och att den är jobbigare att configurera t.ex så hittar jag inte riktigt vart man tillåter "$di" som variabel namn utan att påverka något annat eller hur man kan ignorera funktioner som "url" vilket tillhör anax.

Jag gjorde inga förändringar i modulen detta krusmomentet, då jag fick ett bra tips som att börja med denna biten lite tidigare, vilket underlättade både detta och föregående kursmoment ganska mycket. Däremot så har jag uppdaterad doden lite atteftersom när jag såg att Scrutinizer klagade, den största ändringen över veckorna var nog att jag gjorde om multi_curl funktionen lite då den tyckte att koden vad lite för complex. 

Verktygen verkar tycka om det jag har gjort då Scrutinizer visar en 10:a med 100% kod-teckning, Codacy klagar lite på att $di är för kort variabel namn men säger endå A. Även Codeclimate ger betyget A, men det är inte så konstigt då kodbasen för modulen är ganska liten, vilket gör att det inte finns så mycket att "göra fel" på. Jag håller inte riktigt med eftersom jag blir nästan aldrig blir nöjd med någoting. Tjänsterna kollar bara på logiken bakom koden som - "är denna metoden för complex?" eller - "används denna variablen/kodblocket någon gång?". Jag känner att det finns andra saker man kan göra för att "förbättra" koden, bland annat kanske utnyttja klassernas config fil lite mera, t.ex. hantera webbsidornas information och urler, dela upp de i flera mindre klasser och lite annat. Visst skulle det vara bra men nu är koden såpas liten att det inte har någon speciell betydelse.

Kollar man på Laravels CI-kedja så innhåller det inte mer än versions nummret, antal nedladdningar, lisences samnt att builden passerar i travis. Modulerna och ramverket kommer med tester som man själv kan sätta upp och av det jag har hittat så verkar testerna ge ett "lågt" code-covrage då avrage för klasserna ligger på runt 53% (alla klasser varierar från 0-100%). Men covrage är inte allt då vissa klasser kanske bara är byggda som getters och setters, logiken är bra att testa men det är lite onödigt att göra exakt samma tester för 30 andra klasser då de inte alltid snappas upp när man utför andra tester. Man kan **inte lita** helt på **resultaten** då jag själv inte har sätt det och bara hittat covrage information på några äldre forum diskutioner som säkerligen inte stämmer så jättebra.

Däremot så har Laravels ramverk ganska bra redskap när det kommer till testing. De tillåter att man skapar ett Browser objekt som använder sig av [ChromeDriver](https://sites.google.com/a/chromium.org/chromedriver/home) vilket tillåter en att testa sin kod mot "webbläsaren", i $browser. Men $browser kan man t.ex be den att besöka /login, få den att skriva in alla detaljer och klicka på en knapp och asserta att man har blivir redirectad till /home. För att integrera detta mot olika CI-tjänster krävs det däremot att man lägger in extra kommandon i tjänstens config fil för, att blandannat starta servern. Det finns dokumenterat hur och vad som behövs för att det skall fungera med färdiga yml filer till Travis, CircleCi och andra.

Mitt till för kursmomentet är hur man kan använda sig av externa tjänster som Scrutinizer för att analysera sin kod utöver att bara validera med dbwebb kommandon.