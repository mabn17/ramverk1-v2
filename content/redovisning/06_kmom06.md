---
---
Redovisning kmom06
=========================

Krusmoment sex var ganska kort men innehöll endå mycket nytt som, formulärhantering med hjälp av klasser samt ett lite anurlunda sätt att hantera databaser på. Anax/htmlform gjorde det riktigt enkelt att skapa och lägga till nya form's, jag har alltid kännt att CRUD har varit segt bland annat för att man hela tiden moste copy/pasta minst tre st form inlägg vilket också blir förvirrande i längden, inte minst för att ändra routen dit den skall postas, kolla så att allt validerar och sedan hantera responsen, här var det bara till att köra en ny callback method. Jag gillar hur man lätt kan lägga till och ändra saker bara genom att skriva en array, koden blir mer hanterbar och lättläst. Som jag känner så är den enda nackdelen, att, det är svårare att lägga till extra divar i form inläggen (tänker på bootstrap), men man kan fortvarande lägga in ett "class" värde i arrayen vilket var skönt.

Kollar man på de andra "större" ramverken för PHP så använder sig alla sina egna och det är svårt att påpeka något speciellt då de jobbar på ett annurlunda sätt än anax. Laravel t.ex. jobbar mer med *`Form::` (Facades se kmom03)*, man öppnar formuläret och skickar med olika options som ulr, method, action (kanske en egen controller) och sedan stänger men formuläret själv med inbyggda metoder liknande html. Input fälten och sumbit knapparna sätter man var för sig (också med Facades) där man kan skicka med saker om id, value, validate med mera.

Det var nytt att använda sig av Active Redcord för att hantera databasen, det var riktigt lätt att jobba med (känns nästan för simpelt). Designmönstret underlättar inte bara queries till databasen den håller också koden mer "konsistent" då man bara håller sig till objekt och klasser samt att det blir mer strikt med collumnerna. Men som med allt finns det också nackdelar, några saker jag kan komma på är att eftersom databasen är så hårt kopplade mot objekten och klasserna kan de bli jobbigare att testa. Något som jag också läste om är att SQL koden bakom inte är så optimal vilken kan dela till problem med prestandan, dock är detta inget vi behöver oroas oss över/ känner av eftersom vi inte har så många användare.

Ramverk som *Yii* försöker gå runt detta genom att använda sig av design mönstret "Repository" som är ganska likt *AR (avitve record)* men den största skillnaden är att man själv delar upp klassen som hanterar queries med sina egna metoder som att det skall bli lite mer optimerat att hämta ut spesifika värden som t.ex `id`. De flesta ramverk ser ut att jobba mot *AR*s design mönster, t.ex Laravel som gjorde sin egna version [Eloquent](https://laravel.com/docs/5.7/eloquent).

Scaffolding var också något nytt, däremot så har jag hört och läst om det tidigare. Man kan säga att scaffolding är för-paketerad/genererad kod, oftast CRUD applikationer för PHP och Ruby som hanterar ui, databaser, REST etc. Jag gillar idén bakom den då det ger en snabb start till arbetet och man behöver inte häller skriva "ny" kod varje gång man skall börja på något nytt. Nackdelen är att det tar tid att skriva en vilket gör att det kan vara svårt att hålla koden "uppdaterad" då nya tekniker kommer ut dagligen. Man behöver säkerligen inte skriva en själv då det finns många alternativ men det, kan vara svårt att hitta en som passar just det man själv håller på med osv.

När jag kikade runt så hittade jag ingen särskild information på hur de andra ramverken hanterade scaffolding, både Laravel (`php artisan`) och Sympony (`php bin/console`) har sina egna, medans Yii hade ont om information. Lite mer exemplar fanns det på hur Phalcon hanterar sin, något som jag tyckte verkade vara trevligt och passande till detta kmom är hur den kan automat-generera en full fungerande CRUD, bara genom att skriva `phalcon scaffold --table-name tableName` så skapar den både med en *controller klass* tillsammans med alla vyer och en layout fil. Det finns säkerligen liknande funktioner (om inte annat moduler) i de andra ramverken som jag inte kunde hitta.

Vill man enhetstesta CRUD applikationer så kan det vara lite jobbigare att testa görmörelsevis med annan kod då man gärna inte vill påvärka och ändra datan som finns på webbplatsen. Detta kan man undvika om man Mockar klasserna så att det kan peka på andra table namn (eller kanske en initiera den med en ny databas) som är "kopior" av de riktigta men kanske med mindre innehåll.

Veckans **TIL** är hur man kan använda sig av andra sätt att hantera formulär tillsammans med nya designmönster som *Active Record*.
